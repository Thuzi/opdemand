include: [ base, aws, network, server, lb, autoscaler ]
tiers:
  - name: Security
    description: Provides security infrastructure
    components:
      - type: aws-keypair
  - name: Network
    description: Provides network infrastructure
    components:
      - type: aws-sg
  - name: Load Balancing
    description: Provides load balancing services
    include: [ ] 
    components:
      - type: aws-elb
        include: [ aws, lb ] 
        name: ELB
        output:
          network/access_host: dns_name
          network/admin_host: dns_name
  - name: Autoscaler
    description: Provides services that power this platform
    components:
      - type: aws-autoscaler
        name: Autoscaling Group
    monitor:
      protocol: tcp
      port: "%(network/access_port)s"
      target: dns_name