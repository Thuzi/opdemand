name: Clojure Application
stack: multi
description: Clojure application including 2 EC2 Instances, a Security Group and Key Pair
components:
  - component: ec2-elb
    include:
      publish: [ http ]
  - component: ec2-instance
    include: 
      config: [ puppet, application ]
    configure:
      puppet/classes: [ "opdemand::common", "opdemand::app::clojure", "opdemand::web::nginx" ]
      application/repository_url: git://github.com/opdemand/example-clojure-ring.git
      application/name: clojure
  - component: ec2-instance
    include: 
      config: [ puppet, application ]
    configure:
      puppet/classes: [ "opdemand::common", "opdemand::app::clojure", "opdemand::web::nginx" ]
      application/repository_url: git://github.com/opdemand/example-clojure-ring.git
      application/name: clojure
  - component: ec2-sg
    configure:
      ec2-sg/rules: [ "0.0.0.0/0,tcp,80,80" ] 
  - component: ec2-keypair
