# -*- test-case-name: c2server.tests.platform.CouchDb1nodeTest -*-
name: CouchDB 1-node
description: >
             Single server CouchDB platform consisting of a Key Pair, Security
             Group and an EC2 instance. Installs the latest stable version of CouchDB.
path: db/couchdb/1node
stack: 1node
include: [ base, aws, network, server, puppet, database ]
config:
  # server/deploy configuration
  server/repository_url: git://github.com/opdemand/opdemand-ubuntu.git
  server/build_script: scripts/build_puppet.sh
  server/deploy_script: scripts/deploy_puppet.py
  # puppet configuration
  puppet/classes: [ "opdemand::common", "opdemand::database::couchdb" ]
  # network configuration
  network/access_cidr: 0.0.0.0/0
  network/access_port: 5984
  network/admin_cidr: 0.0.0.0/0 # SECURITY: change to allow only trusted source networks
  network/admin_port: 22
publish:
  - name: Admin URL
    description: URL used to administer the database
    template: http://%(network/access_host)s:%(network/access_port)s/_utils
